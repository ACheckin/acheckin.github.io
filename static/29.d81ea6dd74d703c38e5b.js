(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{2002:function(e,t,a){"use strict";a.r(t);var s=a(322),i=a(10),n=a(33),o=a.n(n),r=a(6),l=a.n(r),c=a(7),d=a(76),u=a(608),m=a(1357),h=a(15),p=a(17),g=a(186),f=a(187),b=a(0),E=(a(606),a(62),a(1126)),y=a(14),S=a(190),v=a(195),T=a(27),C=a(1184),O=a(1213),N=a(16),M=(a(176),a(98)),_=a.n(M),k=a(323),A=a.n(k),w=a(1305),D=a(1404),P=(a(1964),a(20)),j=a(1157),R=a(1137),x=a(1193),L=(a(34),a(100),a(101),a(1488));function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const z=/^#([\da-f]{3}|[\da-f]{6})$/i;class U extends l.a.PureComponent{constructor(e){super(e),I(this,"colorPicker",void 0),I(this,"colorInput",void 0),I(this,"checkClick",e=>{this.colorPicker.current&&this.colorPicker.current.contains(e.target)||this.setState({isOpened:!1})}),I(this,"togglePicker",()=>{!this.state.isOpened&&this.colorInput.current&&this.colorInput.current.focus(),this.setState({isOpened:!this.state.isOpened})}),I(this,"handleColorChange",e=>{const{hex:t}=e,{onChange:a}=this.props;a&&a(t)}),I(this,"ensureLongColourValue",e=>4!==e.length?e:e.split("").map((e,t)=>0===t?e:"".concat(e).concat(e)).join("")),I(this,"onChange",e=>{let{value:t}=e.target;if(t.startsWith("#")||(t="#"+t),!z.test(t))return;this.setState({hex:t});const{onChange:a}=this.props;a&&a(this.ensureLongColourValue(t))}),I(this,"onBlur",()=>{const{hex:e}=this.state;if(4===e.length){const t=this.ensureLongColourValue(e),{onChange:a}=this.props;a&&7===t.length&&(a(t),this.setState({hex:t.toUpperCase()}))}else this.setHex()}),I(this,"onKeyDown",e=>{"Enter"!==e.key&&" "!==e.key||this.togglePicker()}),I(this,"selectValue",e=>{e.target&&e.target.setSelectionRange(1,e.target.value.length)}),this.colorPicker=l.a.createRef(),this.colorInput=l.a.createRef(),this.state={isOpened:!1,hex:this.props.color.toUpperCase()}}componentWillMount(){this.setHex()}componentDidUpdate(e,t){const{isOpened:a}=t,{isOpened:s}=this.state;this.props.color!==e.color&&this.ensureLongColourValue(this.state.hex)!==this.props.color&&this.setHex(),s!==a&&(s?document.addEventListener("click",this.checkClick):document.removeEventListener("click",this.checkClick))}setHex(){this.setState({hex:this.props.color.toUpperCase()})}render(){const{color:e,id:t}=this.props,{isOpened:a,hex:s}=this.state;return l.a.createElement("div",{className:"color-input input-group"},l.a.createElement("input",{id:"".concat(t,"-inputColorValue"),ref:this.colorInput,className:"form-control",type:"text",value:s,onChange:this.onChange,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onFocus:this.selectValue}),l.a.createElement("span",{id:"".concat(t,"-squareColorIcon"),className:"input-group-addon color-pad",onClick:this.togglePicker},l.a.createElement("i",{id:"".concat(t,"-squareColorIconValue"),className:"color-icon",style:{backgroundColor:e}})),a&&l.a.createElement("div",{ref:this.colorPicker,className:"color-popover",id:"".concat(t,"-ChromePickerModal")},l.a.createElement(L.ChromePicker,{color:e,onChange:this.handleColorChange,disableAlpha:!0})))}}I(U,"propTypes",{id:o.a.string.isRequired,color:o.a.string.isRequired,onChange:o.a.func});var q=U;function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class F extends l.a.Component{constructor(...e){super(...e),B(this,"handleChange",e=>{const{id:t,onChange:a}=this.props;a&&a(t,e)})}render(){const{label:e,color:t,id:a}=this.props;return l.a.createElement("div",null,l.a.createElement("label",{className:"custom-label"},e),l.a.createElement(q,{id:a,color:t,onChange:this.handleChange}))}}B(F,"propTypes",{id:o.a.string.isRequired,label:o.a.node.isRequired,color:o.a.string.isRequired,onChange:o.a.func});var Y=F;function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){H(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const W=Object(D.defineMessages)({sidebarBg:{id:Object(T.b)("user.settings.custom_theme.sidebarBg"),defaultMessage:"Sidebar BG"},sidebarText:{id:Object(T.b)("user.settings.custom_theme.sidebarText"),defaultMessage:"Sidebar Text"},sidebarHeaderBg:{id:Object(T.b)("user.settings.custom_theme.sidebarHeaderBg"),defaultMessage:"Sidebar Header BG"},sidebarHeaderTextColor:{id:Object(T.b)("user.settings.custom_theme.sidebarHeaderTextColor"),defaultMessage:"Sidebar Header Text"},sidebarUnreadText:{id:Object(T.b)("user.settings.custom_theme.sidebarUnreadText"),defaultMessage:"Sidebar Unread Text"},sidebarTextHoverBg:{id:Object(T.b)("user.settings.custom_theme.sidebarTextHoverBg"),defaultMessage:"Sidebar Text Hover BG"},sidebarTextActiveBorder:{id:Object(T.b)("user.settings.custom_theme.sidebarTextActiveBorder"),defaultMessage:"Sidebar Text Active Border"},sidebarTextActiveColor:{id:Object(T.b)("user.settings.custom_theme.sidebarTextActiveColor"),defaultMessage:"Sidebar Text Active Color"},onlineIndicator:{id:Object(T.b)("user.settings.custom_theme.onlineIndicator"),defaultMessage:"Online Indicator"},awayIndicator:{id:Object(T.b)("user.settings.custom_theme.awayIndicator"),defaultMessage:"Away Indicator"},dndIndicator:{id:Object(T.b)("user.settings.custom_theme.dndIndicator"),defaultMessage:"Do Not Disturb Indicator"},mentionBg:{id:Object(T.b)("user.settings.custom_theme.mentionBg"),defaultMessage:"Mention Jewel BG"},mentionColor:{id:Object(T.b)("user.settings.custom_theme.mentionColor"),defaultMessage:"Mention Jewel Text"},centerChannelBg:{id:Object(T.b)("user.settings.custom_theme.centerChannelBg"),defaultMessage:"Center Channel BG"},centerChannelColor:{id:Object(T.b)("user.settings.custom_theme.centerChannelColor"),defaultMessage:"Center Channel Text"},newMessageSeparator:{id:Object(T.b)("user.settings.custom_theme.newMessageSeparator"),defaultMessage:"New Message Separator"},linkColor:{id:Object(T.b)("user.settings.custom_theme.linkColor"),defaultMessage:"Link Color"},buttonBg:{id:Object(T.b)("user.settings.custom_theme.buttonBg"),defaultMessage:"Button BG"},buttonColor:{id:Object(T.b)("user.settings.custom_theme.buttonColor"),defaultMessage:"Button Text"},errorTextColor:{id:Object(T.b)("user.settings.custom_theme.errorTextColor"),defaultMessage:"Error Text Color"},mentionHighlightBg:{id:Object(T.b)("user.settings.custom_theme.mentionHighlightBg"),defaultMessage:"Mention Highlight BG"},mentionHighlightLink:{id:Object(T.b)("user.settings.custom_theme.mentionHighlightLink"),defaultMessage:"Mention Highlight Link"},codeTheme:{id:Object(T.b)("user.settings.custom_theme.codeTheme"),defaultMessage:"Code Theme"}});class V extends l.a.Component{constructor(e){super(e),H(this,"handleColorChange",(e,t)=>{const{updateTheme:a,theme:s}=this.props;if(s[e]!==t){const i=G({},s,{type:"custom",[e]:t});"mentionBg"===e&&(i.mentionBj=t),a(i);const n=this.setCopyTheme(i);this.setState({copyTheme:n})}}),H(this,"pasteBoxChange",e=>{let t,a="";if(a=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):e.clipboardData.getData("Text"),0!==a.length){try{t=JSON.parse(a)}catch(e){return}this.setState({copyTheme:JSON.stringify(t)}),t.type="custom",this.props.updateTheme(t)}}),H(this,"onChangeHandle",e=>{e.stopPropagation()}),H(this,"selectTheme",()=>{const e=this.refs.textarea;e.focus(),e.setSelectionRange(0,this.state.copyTheme.length)}),H(this,"toggleSidebarStyles",e=>{e.preventDefault(),_()(this.refs.sidebarStylesHeader).toggleClass("open"),this.toggleSection(this.refs.sidebarStyles)}),H(this,"toggleCenterChannelStyles",e=>{e.preventDefault(),_()(this.refs.centerChannelStylesHeader).toggleClass("open"),this.toggleSection(this.refs.centerChannelStyles)}),H(this,"toggleLinkAndButtonStyles",e=>{e.preventDefault(),_()(this.refs.linkAndButtonStylesHeader).toggleClass("open"),this.toggleSection(this.refs.linkAndButtonStyles)}),H(this,"onCodeThemeChange",e=>{const t=G({},this.props.theme,{type:"custom",codeTheme:e.target.value});this.props.updateTheme(t)}),H(this,"copyTheme",()=>{this.selectTheme(),document.execCommand("copy"),this.showCopySuccess()}),H(this,"showCopySuccess",()=>{const e=_()(".copy-theme-success");e.show(),setTimeout(()=>{e.hide()},3e3)});const t=this.setCopyTheme(this.props.theme);this.state={copyTheme:t}}componentDidMount(){_()(".group--code").on("change",this.onCodeThemeChange)}componentWillUnmount(){_()(".group--code").off("change",this.onCodeThemeChange)}setCopyTheme(e){const t=Object.assign({},e);return delete t.type,delete t.image,JSON.stringify(t)}toggleSection(e){P.h()?_()(e).toggleClass("open"):_()(e).slideToggle()}render(){const e=this.props.theme,t=[],a=[],s=[];b.P.THEME_ELEMENTS.forEach((i,n)=>{if("codeTheme"===i.id){const t=[];let s="";i.themes.forEach((a,n)=>{a.id===e[i.id]&&(s=a.iconURL),t.push(l.a.createElement("option",{key:"code-theme-key"+n,value:a.id},a.uiName))});var o=l.a.createElement(x.a,{popoverStyle:"info",id:"code-popover",className:"code-popover"},l.a.createElement("img",{width:"200",alt:"code theme image",src:s}));a.push(l.a.createElement("div",{className:"col-sm-6 form-group",key:"custom-theme-key"+n},l.a.createElement("label",{className:"custom-label"},l.a.createElement(E.a,W[i.id])),l.a.createElement("div",{className:"input-group theme-group group--code dropdown",id:i.id},l.a.createElement("select",{id:"codeThemeSelect",className:"form-control",type:"text",defaultValue:e[i.id]},t),l.a.createElement(R.a,{placement:"top",overlay:o,ref:"headerOverlay"},l.a.createElement("span",{className:"input-group-addon"},l.a.createElement("img",{alt:"code theme image",src:s}))))))}else if("centerChannelElements"===i.group)a.push(l.a.createElement("div",{className:"col-sm-6 form-group element",key:"custom-theme-key"+n},l.a.createElement(Y,{id:i.id,label:l.a.createElement(E.a,W[i.id]),color:e[i.id],onChange:this.handleColorChange})));else if("sidebarElements"===i.group){let a=e[i.id];a||"mentionBg"!==i.id||(a=e.mentionBj),t.push(l.a.createElement("div",{className:"col-sm-6 form-group element",key:"custom-theme-key"+n},l.a.createElement(Y,{id:i.id,label:l.a.createElement(E.a,W[i.id]),color:a,onChange:this.handleColorChange})))}else s.push(l.a.createElement("div",{className:"col-sm-6 form-group element",key:"custom-theme-key"+n},l.a.createElement(Y,{id:i.id,label:l.a.createElement(E.a,W[i.id]),color:e[i.id],onChange:this.handleColorChange})))});const i=l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("label",{className:"custom-label"},l.a.createElement(E.a,{id:"user.settings.custom_theme.copyPaste",defaultMessage:"Copy to share or paste theme colors here:"})),l.a.createElement("textarea",{ref:"textarea",className:"form-control",id:"pasteBox",value:this.state.copyTheme,onCopy:this.showCopySuccess,onPaste:this.pasteBoxChange,onChange:this.onChangeHandle,onClick:this.selectTheme}),l.a.createElement("div",{className:"margin-top x2"},l.a.createElement("button",{className:"btn btn-link copy-theme-button",onClick:this.copyTheme},l.a.createElement(E.a,{id:"user.settings.custom_theme.copyThemeColors",defaultMessage:"Copy Theme Colors"})),l.a.createElement("span",{className:"alert alert-success copy-theme-success",role:"alert",style:{display:"none"}},l.a.createElement(E.a,{id:"user.settings.custom_theme.copied",defaultMessage:"✔ Copied"}))));return l.a.createElement("div",{className:"appearance-section padding-top"},l.a.createElement("div",{className:"theme-elements row"},l.a.createElement("div",{ref:"sidebarStylesHeader",id:"sidebarStyles",className:"theme-elements__header",onClick:this.toggleSidebarStyles},l.a.createElement(E.a,{id:"user.settings.custom_theme.sidebarTitle",defaultMessage:"Sidebar Styles"}),l.a.createElement("div",{className:"header__icon"},l.a.createElement(j.a,{className:"fa fa-plus",title:{id:Object(T.b)("generic_icons.expand"),defaultMessage:"Expand Icon"}}),l.a.createElement(j.a,{className:"fa fa-minus",title:{id:Object(T.b)("generic_icons.collapse"),defaultMessage:"Collapse Icon"}}))),l.a.createElement("div",{ref:"sidebarStyles",className:"theme-elements__body"},t)),l.a.createElement("div",{className:"theme-elements row"},l.a.createElement("div",{ref:"centerChannelStylesHeader",id:"centerChannelStyles",className:"theme-elements__header",onClick:this.toggleCenterChannelStyles},l.a.createElement(E.a,{id:"user.settings.custom_theme.centerChannelTitle",defaultMessage:"Center Channel Styles"}),l.a.createElement("div",{className:"header__icon"},l.a.createElement(j.a,{className:"fa fa-plus",title:{id:Object(T.b)("generic_icons.expand"),defaultMessage:"Expand Icon"}}),l.a.createElement(j.a,{className:"fa fa-minus",title:{id:Object(T.b)("generic_icons.collapse"),defaultMessage:"Collapse Icon"}}))),l.a.createElement("div",{ref:"centerChannelStyles",id:"centerChannelStyles",className:"theme-elements__body"},a)),l.a.createElement("div",{className:"theme-elements row"},l.a.createElement("div",{ref:"linkAndButtonStylesHeader",id:"linkAndButtonsStyles",className:"theme-elements__header",onClick:this.toggleLinkAndButtonStyles},l.a.createElement(E.a,{id:"user.settings.custom_theme.linkButtonTitle",defaultMessage:"Link and Button Styles"}),l.a.createElement("div",{className:"header__icon"},l.a.createElement(j.a,{className:"fa fa-plus",title:{id:Object(T.b)("generic_icons.expand"),defaultMessage:"Expand Icon"}}),l.a.createElement(j.a,{className:"fa fa-minus",title:{id:Object(T.b)("generic_icons.collapse"),defaultMessage:"Collapse Icon"}}))),l.a.createElement("div",{ref:"linkAndButtonStyles",className:"theme-elements__body"},s)),l.a.createElement("div",{className:"row margin-top x2"},i))}}H(V,"propTypes",{theme:o.a.object.isRequired,updateTheme:o.a.func.isRequired});a(63),a(74);class J extends l.a.Component{shouldComponentUpdate(){return!0}render(){const e=this.props.theme,t=[],a=this.props.allowedThemes,s=a.length>1||a[0]&&a[0].trim().length>0;for(const i in b.P.THEMES)if(b.P.THEMES.hasOwnProperty(i)){if(s&&a.indexOf(i)<0)continue;const n=_.a.extend(!0,{},b.P.THEMES[i]);let o="";n.type===e.type&&(o="active"),t.push(l.a.createElement("div",{className:"col-xs-6 col-sm-3 premade-themes",key:"premade-theme-key"+i},l.a.createElement("div",{id:"premadeTheme".concat(n.type.replace(" ","")),className:o,onClick:()=>this.props.updateTheme(n)},l.a.createElement("label",null,l.a.createElement("img",{alt:"premade theme "+i,className:"img-responsive",src:n.image}),l.a.createElement("div",{className:"theme-label"},y.pb(n.type))))))}return l.a.createElement("div",{className:"row appearance-section"},l.a.createElement("div",{className:"clearfix"},t))}}J.propTypes={theme:o.a.object.isRequired,updateTheme:o.a.func.isRequired,allowedThemes:o.a.arrayOf(o.a.string)},J.defaultProps={allowedThemes:[]};var $=Object(s.connect)((function(e){const t=Object(h.getConfig)(e);return{allowedThemes:t.AllowedThemes&&t.AllowedThemes.split(",")||[]}}))(J);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){Z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ee extends l.a.Component{constructor(e){super(e),Z(this,"submitTheme",async()=>{const e=this.state.applyToAllTeams?"":this.props.currentTeamId;this.setState({isSaving:!0}),await this.props.actions.saveTheme(e,this.state.theme),this.state.applyToAllTeams&&await this.props.actions.deleteTeamSpecificThemes(),this.props.setRequireConfirm(!1),this.originalTheme=Object.assign({},this.state.theme),this.scrollToTop(),this.props.updateSection(""),this.setState({isSaving:!1})}),Z(this,"updateTheme",e=>{let t=this.state.theme.length===e.length;if(!t)for(const a in e)if(e.hasOwnProperty(a)&&this.state.theme[a]!==e[a]){t=!0;break}this.props.setRequireConfirm(t),this.setState({theme:e}),y.b(e)}),Z(this,"resetFields",()=>{const e=this.getStateFromProps();e.serverError=null,this.setState(e),this.scrollToTop(),y.b(e.theme),this.props.setRequireConfirm(!1)}),Z(this,"handleImportModal",()=>{w.a.handleViewAction({type:b.f.TOGGLE_IMPORT_THEME_MODAL,value:!0,callback:this.updateTheme}),this.props.setEnforceFocus(!1)}),Z(this,"handleUpdateSection",e=>{this.props.updateSection(e)}),this.state=X({},this.getStateFromProps(e),{isSaving:!1}),this.originalTheme=Object.assign({},this.state.theme)}shouldComponentUpdate(){return!0}componentDidMount(){this.props.selected&&_()(A.a.findDOMNode(this.refs[this.state.theme])).addClass("active-border")}componentDidUpdate(){this.props.selected&&(_()(".color-btn").removeClass("active-border"),_()(A.a.findDOMNode(this.refs[this.state.theme])).addClass("active-border"))}UNSAFE_componentWillReceiveProps(e){this.props.selected&&!e.selected&&this.resetFields()}componentWillUnmount(){this.props.selected&&y.b(this.props.theme)}getStateFromProps(e=this.props){const t=X({},e.theme);return t.codeTheme||(t.codeTheme=b.i.DEFAULT_CODE_THEME),{theme:t,type:t.type||"premade",showAllTeamsCheckbox:e.showAllTeamsCheckbox,applyToAllTeams:e.applyToAllTeams}}scrollToTop(){_()(".ps-container.modal-body").scrollTop(0)}updateType(e){this.setState({type:e})}render(){let e;this.state.serverError&&(e=this.state.serverError);const t="custom"===this.state.type;let a,s,i;if(t&&this.props.allowCustomThemes?a=l.a.createElement("div",{key:"customThemeChooser"},l.a.createElement(V,{theme:this.state.theme,updateTheme:this.updateTheme})):s=l.a.createElement("div",{key:"premadeThemeChooser"},l.a.createElement("br",null),l.a.createElement($,{theme:this.state.theme,updateTheme:this.updateTheme})),this.props.selected){const n=[];this.props.allowCustomThemes&&n.push(l.a.createElement("div",{className:"radio",key:"premadeThemeColorLabel"},l.a.createElement("label",null,l.a.createElement("input",{id:"standardThemes",type:"radio",name:"theme",checked:!t,onChange:this.updateType.bind(this,"premade")}),l.a.createElement(E.a,{id:"user.settings.display.theme.themeColors",defaultMessage:"Theme Colors"})),l.a.createElement("br",null))),n.push(s),this.props.allowCustomThemes&&(n.push(l.a.createElement("div",{className:"radio",key:"customThemeColorLabel"},l.a.createElement("label",null,l.a.createElement("input",{id:"customThemes",type:"radio",name:"theme",checked:t,onChange:this.updateType.bind(this,"custom")}),l.a.createElement(E.a,{id:"user.settings.display.theme.customTheme",defaultMessage:"Custom Theme"})))),n.push(a));let o=null;this.state.showAllTeamsCheckbox&&(o=l.a.createElement("div",{className:"checkbox user-settings__submit-checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:"applyThemeToAllTeams",type:"checkbox",checked:this.state.applyToAllTeams,onChange:e=>this.setState({applyToAllTeams:e.target.checked})}),l.a.createElement(E.a,{id:"user.settings.display.theme.applyToAllTeams",defaultMessage:"Apply new theme to all my teams"})))),i=l.a.createElement(C.a,{inputs:n,submitExtra:o,submit:this.submitTheme,disableEnterSubmit:!0,saving:this.state.isSaving,server_error:e,width:"full",updateSection:this.handleUpdateSection})}else i=l.a.createElement(O.a,{title:l.a.createElement(E.a,{id:"user.settings.display.theme.title",defaultMessage:"Theme"}),describe:l.a.createElement(E.a,{id:"user.settings.display.theme.describe",defaultMessage:"Open to manage your theme"}),section:"theme",updateSection:this.handleUpdateSection,focused:this.props.focused});return i}}Z(ee,"propTypes",{actions:o.a.shape({saveTheme:o.a.func.isRequired,deleteTeamSpecificThemes:o.a.func.isRequired}).isRequired,currentTeamId:o.a.string.isRequired,theme:o.a.object,selected:o.a.bool.isRequired,updateSection:o.a.func.isRequired,setRequireConfirm:o.a.func.isRequired,setEnforceFocus:o.a.func.isRequired,allowCustomThemes:o.a.bool,focused:o.a.bool.isRequired});var te=Object(s.connect)((function(){const e=Object(p.makeGetCategory)();return t=>({currentTeamId:Object(N.getCurrentTeamId)(t),theme:Object(p.getTheme)(t),applyToAllTeams:e(t,b.A.CATEGORY_THEME).length<=1,showAllTeamsCheckbox:Object(N.getMyTeamsCount)(t)>1})}),(function(e){return{actions:Object(c.bindActionCreators)({saveTheme:d.saveTheme,deleteTeamSpecificThemes:d.deleteTeamSpecificThemes},e)}}))(ee),ae=a(1272),se=a(19),ie=(a(146),a(1427)),ne=a(1201),oe=a(1202),re=a(1162),le=a(1163);class ce extends le.a{render(){const{item:e,isSelection:t}=this.props,a=e;let s="mentions__name";return t&&(s+=" suggestion--selected"),l.a.createElement("div",Object.assign({onClick:this.handleClick,className:s,ref:e=>{this.node=e}},le.a.baseProps),a)}}class de extends re.a{handlePretextChanged(e,t){return 0===e.length?(this.displayAllTimezones(t,e),!0):!!e&&(this.filterTimezones(t,e),!0)}async displayAllTimezones(e){e({matchedPretext:"",terms:Object(S.d)(),items:Object(S.d)(),component:ce})}async filterTimezones(e,t){const a=Object(S.d)().filter(e=>Object(f.getTimezoneRegion)(e).toLowerCase().indexOf(t)>=0||e.toLowerCase().indexOf(t)>=0);e({matchedPretext:t,terms:a,items:a,component:ce})}}function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function me(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class he extends l.a.PureComponent{constructor(e){super(e),me(this,"onChange",e=>{this.setState({manualTimezoneInput:e.target.value})}),me(this,"handleTimezoneSelected",e=>{e&&this.setState({manualTimezone:e,manualTimezoneInput:e})}),me(this,"timezoneNotChanged",()=>{const{useAutomaticTimezone:e,automaticTimezone:t,manualTimezone:a}=this.state,{useAutomaticTimezone:s,automaticTimezone:i,manualTimezone:n}=this.props;return e===s&&t===i&&a===n}),me(this,"changeTimezone",()=>{this.timezoneNotChanged()?this.props.updateSection(""):this.submitUser()}),me(this,"submitUser",()=>{const{user:e,actions:t}=this.props,{useAutomaticTimezone:a,automaticTimezone:s,manualTimezone:i}=this.state,n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){me(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{timezone:{useAutomaticTimezone:a.toString(),automaticTimezone:s,manualTimezone:i}});t.updateMe(n).then(({data:e,error:t})=>{if(e)this.props.updateSection("");else if(t){let e;e=t.message?t.message:t,this.setState({serverError:e,isSaving:!1})}})}),me(this,"handleAutomaticTimezone",e=>{const t=e.target.checked;let a="";t&&(a=Object(S.a)()),this.setState({useAutomaticTimezone:t,automaticTimezone:a})}),me(this,"handleManualTimezone",e=>{this.setState({manualTimezone:e.target.value})}),this.state={useAutomaticTimezone:e.useAutomaticTimezone,automaticTimezone:e.automaticTimezone,manualTimezone:e.manualTimezone,manualTimezoneInput:e.manualTimezone,isSaving:!1}}render(){const{timezones:e}=this.props,{useAutomaticTimezone:t,automaticTimezone:a}=this.state;let s;this.state.serverError&&(s=l.a.createElement("label",{className:"has-error"},this.state.serverError));const i=[],n=l.a.createElement("div",{className:"section-describe padding-top"},t&&Object(f.getTimezoneRegion)(a)),o=0===e.length,r=l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:"automaticTimezoneInput",type:"checkbox",checked:t,onChange:this.handleAutomaticTimezone,disabled:o}),l.a.createElement(E.a,{id:"user.settings.timezones.automatic",defaultMessage:"Set automatically"}),n)),c=[new de],d=l.a.createElement("div",{key:"changeTimezone"},l.a.createElement("label",{className:"control-label"},l.a.createElement(E.a,{id:"user.settings.timezones.change",defaultMessage:"Change timezone"})),l.a.createElement("div",{className:"padding-top"},l.a.createElement(ne.a,{ref:this.setSwitchBoxRef,className:"form-control focused",type:"search",onChange:this.onChange,value:this.state.manualTimezoneInput,onItemSelected:this.handleTimezoneSelected,listComponent:oe.a,maxLength:"64",requiredCharacters:0,providers:c,listStyle:"bottom",completeOnTab:!1,renderDividers:!1,openOnFocus:!0,disabled:o}),s));return i.push(r),t||i.push(d),i.push(l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(ie.a,{id:"user.settings.timezones.promote",defaultMessage:"Select the time zone used for timestamps in the user interface and email notifications."}))),l.a.createElement(C.a,{title:l.a.createElement(E.a,{id:"user.settings.display.timezone",defaultMessage:"Timezone"}),containerStyle:"timezone-container",width:"medium",submit:this.changeTimezone,saving:this.state.isSaving,inputs:i,updateSection:this.props.updateSection})}}me(he,"propTypes",{user:o.a.object.isRequired,updateSection:o.a.func.isRequired,useAutomaticTimezone:o.a.bool.isRequired,automaticTimezone:o.a.string.isRequired,manualTimezone:o.a.string.isRequired,timezones:o.a.array.isRequired,actions:o.a.shape({updateMe:o.a.func.isRequired}).isRequired});var pe=Object(s.connect)(null,(function(e){return{actions:Object(c.bindActionCreators)({updateMe:se.updateMe},e)}}))(he),ge=a(1240),fe=a(1134);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(Object(a),!0).forEach((function(t){ye(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ye(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Se extends l.a.Component{constructor(e){super(e),ye(this,"handleContainerKeyDown",e=>{Object(y.V)(e,b.P.KeyCodes.ESCAPE)&&this.state.openMenu&&(document.querySelector(".modal-body").classList.remove("no-scroll"),this.setState({openMenu:!1}),e.stopPropagation())}),ye(this,"handleKeyDown",e=>{Object(y.V)(e,b.P.KeyCodes.ENTER)&&(document.querySelector(".modal-body").classList.add("no-scroll"),this.setState({openMenu:!0}))}),ye(this,"setLanguage",e=>{this.setState({locale:e.value,selectedOption:e})}),ye(this,"changeLanguage",()=>{this.props.user.locale===this.state.locale?this.props.updateSection(""):this.submitUser(Ee({},this.props.user,{locale:this.state.locale}))}),ye(this,"submitUser",e=>{this.setState({isSaving:!0}),this.props.actions.updateMe(e).then(({data:e,error:t})=>{if(e);else if(t){let e;e=t.message?t.message:t,this.setState({serverError:e,isSaving:!1})}})}),ye(this,"handleMenuClose",()=>{document.querySelector(".modal-body").classList.remove("no-scroll"),this.setState({openMenu:!1})}),ye(this,"handleMenuOpen",()=>{document.querySelector(".modal-body").classList.add("no-scroll"),this.setState({openMenu:!0})});const t=v.d(),a=e.locale,s={value:t[a].value,label:t[a].name};this.reactSelectContainer=l.a.createRef(),this.state={locale:e.locale,selectedOption:s,isSaving:!1,openMenu:!1}}componentDidMount(){this.reactSelectContainer.current&&this.reactSelectContainer.current.addEventListener("keydown",this.handleContainerKeyDown)}componentWillUnmount(){this.reactSelectContainer.current&&this.reactSelectContainer.current.removeEventListener("keydown",this.handleContainerKeyDown)}render(){let e;this.state.serverError&&(e=l.a.createElement("label",{className:"has-error"},this.state.serverError));const t=[],a=v.d();Object.keys(a).map(e=>({value:a[e].value,name:a[e].name,order:a[e].order})).sort((e,t)=>e.order-t.order).forEach(e=>{t.push({value:e.value,label:e.name})});const s={menuPortal:e=>Ee({},e,{zIndex:9999})},i=l.a.createElement("div",{key:"changeLanguage"},l.a.createElement("br",null),l.a.createElement("label",{className:"control-label",id:"changeInterfaceLanguageLabel"},l.a.createElement(E.a,{id:"user.settings.languages.change",defaultMessage:"Change interface language"})),l.a.createElement("div",{ref:this.reactSelectContainer,className:"padding-top"},l.a.createElement(ge.b,{className:"react-select react-select-top",classNamePrefix:"react-select",id:"displayLanguage",menuIsOpen:this.state.openMenu,menuPortalTarget:document.body,styles:s,options:t,clearable:!1,onChange:this.setLanguage,onKeyDown:this.handleKeyDown,value:this.state.selectedOption,onMenuClose:this.handleMenuClose,onMenuOpen:this.handleMenuOpen,"aria-labelledby":"changeInterfaceLanguageLabel"}),e),l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(fe.b,{id:"user.settings.languages.promote",defaultMessage:"Select which language Mattermost displays in the user interface.\\n \\nWould you like to help with translations? Join the [Mattermost Translation Server](!http://translate.mattermost.com/) to contribute."})));return l.a.createElement(C.a,{title:l.a.createElement(E.a,{id:"user.settings.display.language",defaultMessage:"Language"}),width:"medium",submit:this.changeLanguage,saving:this.state.isSaving,inputs:[i],updateSection:this.props.updateSection})}}ye(Se,"propTypes",{user:o.a.object.isRequired,locale:o.a.string.isRequired,updateSection:o.a.func.isRequired,actions:o.a.shape({updateMe:o.a.func.isRequired}).isRequired});var ve=Object(s.connect)(null,(function(e){return{actions:Object(c.bindActionCreators)({updateMe:se.updateMe},e)}}))(Se);function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(a),!0).forEach((function(t){Oe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ne=b.P.Preferences;function Me(e){return{militaryTime:e.militaryTime,teammateNameDisplay:e.teammateNameDisplay,channelDisplayMode:e.channelDisplayMode,messageDisplay:e.messageDisplay,collapseDisplay:e.collapseDisplay,linkPreviewDisplay:e.linkPreviewDisplay}}class _e extends l.a.Component{constructor(e){super(e),Oe(this,"handleSubmit",async()=>{const e=this.props.user.id,t={user_id:e,category:Ne.CATEGORY_DISPLAY_SETTINGS,name:Ne.USE_MILITARY_TIME,value:this.state.militaryTime},a={user_id:e,category:Ne.CATEGORY_DISPLAY_SETTINGS,name:Ne.NAME_NAME_FORMAT,value:this.state.teammateNameDisplay},s={user_id:e,category:Ne.CATEGORY_DISPLAY_SETTINGS,name:Ne.CHANNEL_DISPLAY_MODE,value:this.state.channelDisplayMode},i={user_id:e,category:Ne.CATEGORY_DISPLAY_SETTINGS,name:Ne.MESSAGE_DISPLAY,value:this.state.messageDisplay},n={user_id:e,category:Ne.CATEGORY_DISPLAY_SETTINGS,name:Ne.COLLAPSE_DISPLAY,value:this.state.collapseDisplay},o={user_id:e,category:Ne.CATEGORY_DISPLAY_SETTINGS,name:Ne.LINK_PREVIEW_DISPLAY,value:this.state.linkPreviewDisplay};this.setState({isSaving:!0});const r=[t,s,i,n,o,a];await this.props.actions.savePreferences(e,r),this.updateSection("")}),Oe(this,"handleClockRadio",e=>{this.setState({militaryTime:e})}),Oe(this,"handleTeammateNameDisplayRadio",e=>{this.setState({teammateNameDisplay:e})}),Oe(this,"updateSection",e=>{this.updateState(),this.props.updateSection(e)}),Oe(this,"updateState",()=>{const e=Me(this.props);y.c(e,this.state)||this.setState(e),this.setState({isSaving:!1})}),this.state=Ce({},Me(e),{isSaving:!1}),0===e.timezones.length&&e.actions.getSupportedTimezones(),this.prevSections={theme:"dummySectionName",clock:"theme",linkpreview:"clock",message_display:"linkpreview",channel_display_mode:"message_display",languages:"channel_display_mode"}}componentDidMount(){const{actions:e,enableTimezone:t,shouldAutoUpdateTimezone:a}=this.props;t&&a&&e.autoUpdateTimezone(Object(S.a)())}componentDidUpdate(e){this.props.teammateNameDisplay!==e.teammateNameDisplay&&this.updateState()}handleChannelDisplayModeRadio(e){this.setState({channelDisplayMode:e})}handlemessageDisplayRadio(e){this.setState({messageDisplay:e})}handleCollapseRadio(e){this.setState({collapseDisplay:e})}handleLinkPreviewRadio(e){this.setState({linkPreviewDisplay:e})}handleOnChange(e){this.setState(Ce({},e))}createSection(e){const{section:t,display:a,value:s,title:i,firstOption:n,secondOption:o,thirdOption:r,description:c,disabled:d}=e;let u=null,m=this.handleSubmit;const h=l.a.createElement(E.a,{id:n.radionButtonText.id,defaultMessage:n.radionButtonText.message});let p,g;n.radionButtonText.moreId&&(p=": ",g=l.a.createElement("span",{className:"font-weight--normal"},l.a.createElement(E.a,{id:n.radionButtonText.moreId,defaultMessage:n.radionButtonText.moreMessage})));const f=l.a.createElement(E.a,{id:o.radionButtonText.id,defaultMessage:o.radionButtonText.message});let b,y;o.radionButtonText.moreId&&(b=l.a.createElement("span",{className:"font-weight--normal"},l.a.createElement(E.a,{id:o.radionButtonText.moreId,defaultMessage:o.radionButtonText.moreMessage}))),r&&(y=l.a.createElement(E.a,{id:r.radionButtonText.id,defaultMessage:r.radionButtonText.message}));const S=l.a.createElement(E.a,{id:i.id,defaultMessage:i.message}),v=l.a.createElement(E.a,{id:c.id,defaultMessage:c.message});if(this.props.activeSection===t){const e=[!1,!1,!1];s===n.value?e[0]=!0:s===o.value?e[1]=!0:e[2]=!0;const i=t+"Format",c=t+"UserDisplay",T={};T[a]=n.value;const O={};O[a]=o.value;const N={};let M;r&&(N[a]=r.value),y&&(M=l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:i+"C",type:"radio",name:i,checked:e[2],onChange:()=>this.handleOnChange(N)}),y),l.a.createElement("br",null)));let _=[l.a.createElement("fieldset",{key:c},l.a.createElement("legend",{className:"form-legend hidden-label"},S),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:i+"A",type:"radio",name:i,checked:e[0],onChange:()=>this.handleOnChange(T)}),h,p,g),l.a.createElement("br",null)),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:i+"B",type:"radio",name:i,checked:e[1],onChange:()=>this.handleOnChange(O)}),f,p,b),l.a.createElement("br",null)),M,l.a.createElement("div",null,l.a.createElement("br",null),v))];return"teammateNameDisplay"===a&&d&&(u=l.a.createElement("span",null,l.a.createElement(E.a,{id:"user.settings.display.teammateNameDisplay",defaultMessage:"This field is handled through your System Administrator. If you want to change it, you need to do so through your System Administrator."})),m=null,_=[]),l.a.createElement("div",null,l.a.createElement(C.a,{title:S,inputs:_,submit:m,saving:this.state.isSaving,server_error:this.state.serverError,updateSection:this.updateSection,extraInfo:u}),l.a.createElement("div",{className:"divider-dark"}))}let T;return T=s===n.value?h:s===o.value?f:y,l.a.createElement("div",null,l.a.createElement(O.a,{title:S,describe:T,section:t,updateSection:this.updateSection}),l.a.createElement("div",{className:"divider-dark"}))}render(){const e=this.createSection({section:"collapse",display:"collapseDisplay",value:this.state.collapseDisplay,defaultDisplay:"false",title:{id:Object(T.b)("user.settings.display.collapseDisplay"),message:"Default appearance of image previews"},firstOption:{value:"false",radionButtonText:{id:Object(T.b)("user.settings.display.collapseOn"),message:"On"}},secondOption:{value:"true",radionButtonText:{id:Object(T.b)("user.settings.display.collapseOff"),message:"Off"}},description:{id:Object(T.b)("user.settings.display.collapseDesc"),message:"Set whether previews of image links and image attachment thumbnails show as expanded or collapsed by default. This setting can also be controlled using the slash commands /expand and /collapse."}});let t=null;this.props.enableLinkPreviews?(t=this.createSection({section:"linkpreview",display:"linkPreviewDisplay",value:this.state.linkPreviewDisplay,defaultDisplay:"true",title:{id:Object(T.b)("user.settings.display.linkPreviewDisplay"),message:"Website Link Previews"},firstOption:{value:"true",radionButtonText:{id:Object(T.b)("user.settings.display.linkPreviewOn"),message:"On"}},secondOption:{value:"false",radionButtonText:{id:Object(T.b)("user.settings.display.linkPreviewOff"),message:"Off"}},description:{id:Object(T.b)("user.settings.display.linkPreviewDesc"),message:"When available, the first web link in a message will show a preview of the website content below the message."}}),this.prevSections.message_display="linkpreview"):this.prevSections.message_display=this.prevSections.linkpreview;const a=this.createSection({section:"clock",display:"militaryTime",value:this.state.militaryTime,defaultDisplay:"false",title:{id:Object(T.b)("user.settings.display.clockDisplay"),message:"Clock Display"},firstOption:{value:"false",radionButtonText:{id:Object(T.b)("user.settings.display.normalClock"),message:"12-hour clock (example: 4:00 PM)"}},secondOption:{value:"true",radionButtonText:{id:Object(T.b)("user.settings.display.militaryClock"),message:"24-hour clock (example: 16:00)"}},description:{id:Object(T.b)("user.settings.display.preferTime"),message:"Select how you prefer time displayed."}}),s=this.createSection({section:Ne.NAME_NAME_FORMAT,display:"teammateNameDisplay",value:this.props.lockTeammateNameDisplay?this.props.configTeammateNameDisplay:this.state.teammateNameDisplay,defaultDisplay:this.props.configTeammateNameDisplay,title:{id:Object(T.b)("user.settings.display.teammateNameDisplayTitle"),message:"Teammate Name Display"},firstOption:{value:b.P.TEAMMATE_NAME_DISPLAY.SHOW_USERNAME,radionButtonText:{id:Object(T.b)("user.settings.display.teammateNameDisplayUsername"),message:"Show username"}},secondOption:{value:b.P.TEAMMATE_NAME_DISPLAY.SHOW_NICKNAME_FULLNAME,radionButtonText:{id:Object(T.b)("user.settings.display.teammateNameDisplayNicknameFullname"),message:"Show nickname if one exists, otherwise show first and last name"}},thirdOption:{value:b.P.TEAMMATE_NAME_DISPLAY.SHOW_FULLNAME,radionButtonText:{id:Object(T.b)("user.settings.display.teammateNameDisplayFullname"),message:"Show first and last name"}},description:{id:Object(T.b)("user.settings.display.teammateNameDisplayDescription"),message:"Set how to display other user's names in posts and the Direct Messages list."},disabled:this.props.lockTeammateNameDisplay});let i;if(this.props.enableTimezone&&!this.props.shouldAutoUpdateTimezone){const e=this.props.userTimezone;i="timezone"===this.props.activeSection?l.a.createElement("div",null,l.a.createElement(pe,{user:this.props.user,timezones:this.props.timezones,useAutomaticTimezone:e.useAutomaticTimezone,automaticTimezone:e.automaticTimezone,manualTimezone:e.manualTimezone,updateSection:this.updateSection}),l.a.createElement("div",{className:"divider-dark"})):l.a.createElement("div",null,l.a.createElement(O.a,{title:l.a.createElement(E.a,{id:"user.settings.display.timezone",defaultMessage:"Timezone"}),width:"medium",describe:Object(f.getTimezoneRegion)(this.props.currentUserTimezone),section:"timezone",updateSection:this.updateSection}),l.a.createElement("div",{className:"divider-dark"}))}const n=this.createSection({section:Ne.MESSAGE_DISPLAY,display:"messageDisplay",value:this.state.messageDisplay,defaultDisplay:Ne.MESSAGE_DISPLAY_CLEAN,title:{id:Object(T.b)("user.settings.display.messageDisplayTitle"),message:"Message Display"},firstOption:{value:Ne.MESSAGE_DISPLAY_CLEAN,radionButtonText:{id:Object(T.b)("user.settings.display.messageDisplayClean"),message:"Standard",moreId:Object(T.b)("user.settings.display.messageDisplayCleanDes"),moreMessage:"Easy to scan and read."}},secondOption:{value:Ne.MESSAGE_DISPLAY_COMPACT,radionButtonText:{id:Object(T.b)("user.settings.display.messageDisplayCompact"),message:"Compact",moreId:Object(T.b)("user.settings.display.messageDisplayCompactDes"),moreMessage:"Fit as many messages on the screen as we can."}},description:{id:Object(T.b)("user.settings.display.messageDisplayDescription"),message:"Select how messages in a channel should be displayed."}}),o=this.createSection({section:Ne.CHANNEL_DISPLAY_MODE,display:"channelDisplayMode",value:this.state.channelDisplayMode,defaultDisplay:Ne.CHANNEL_DISPLAY_MODE_FULL_SCREEN,title:{id:Object(T.b)("user.settings.display.channelDisplayTitle"),message:"Channel Display"},firstOption:{value:Ne.CHANNEL_DISPLAY_MODE_FULL_SCREEN,radionButtonText:{id:Object(T.b)("user.settings.display.fullScreen"),message:"Full width"}},secondOption:{value:Ne.CHANNEL_DISPLAY_MODE_CENTERED,radionButtonText:{id:Object(T.b)("user.settings.display.fixedWidthCentered"),message:"Fixed width, centered"}},description:{id:Object(T.b)("user.settings.display.channeldisplaymode"),message:"Select the width of the center channel."}});let r,c,d=this.props.user.locale;if("languages"===this.props.activeSection)v.e(d)||(d=this.props.defaultClientLocale),r=l.a.createElement("div",null,l.a.createElement(ve,{user:this.props.user,locale:d,updateSection:this.updateSection}),l.a.createElement("div",{className:"divider-dark"}));else{let e;e=v.e(d)?v.c(d).name:v.c(this.props.defaultClientLocale).name,r=l.a.createElement("div",null,l.a.createElement(O.a,{title:l.a.createElement(E.a,{id:"user.settings.display.language",defaultMessage:"Language"}),width:"medium",describe:e,section:"languages",updateSection:this.updateSection}),l.a.createElement("div",{className:"divider-dark"}))}return 1===Object.keys(v.d()).length&&(r=null),this.props.enableThemeSelection&&(c=l.a.createElement("div",null,l.a.createElement(te,{selected:"theme"===this.props.activeSection,updateSection:this.updateSection,setRequireConfirm:this.props.setRequireConfirm,setEnforceFocus:this.props.setEnforceFocus,allowCustomThemes:this.props.allowCustomThemes}),l.a.createElement("div",{className:"divider-dark"}))),l.a.createElement("div",{id:"displaySettings"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},l.a.createElement("span",{"aria-hidden":"true"},"×")),l.a.createElement("h4",{className:"modal-title",ref:"title"},l.a.createElement("div",{className:"modal-back"},l.a.createElement("span",{onClick:this.props.collapseModal},l.a.createElement(ae.a,null))),l.a.createElement(E.a,{id:"user.settings.display.title",defaultMessage:"Display Settings"}))),l.a.createElement("div",{className:"user-settings"},l.a.createElement("h3",{id:"displaySettingsTitle",className:"tab-header"},l.a.createElement(E.a,{id:"user.settings.display.title",defaultMessage:"Display Settings"})),l.a.createElement("div",{className:"divider-dark first"}),c,a,s,i,t,e,n,o,r))}}Oe(_e,"propTypes",{user:o.a.object,updateSection:o.a.func,activeSection:o.a.string,closeModal:o.a.func.isRequired,collapseModal:o.a.func.isRequired,setRequireConfirm:o.a.func.isRequired,setEnforceFocus:o.a.func.isRequired,timezones:o.a.array.isRequired,userTimezone:o.a.object.isRequired,allowCustomThemes:o.a.bool,enableLinkPreviews:o.a.bool,defaultClientLocale:o.a.string,enableThemeSelection:o.a.bool,configTeammateNameDisplay:o.a.string,currentUserTimezone:o.a.string,enableTimezone:o.a.bool,shouldAutoUpdateTimezone:o.a.bool,militaryTime:o.a.string,teammateNameDisplay:o.a.string,channelDisplayMode:o.a.string,messageDisplay:o.a.string,collapseDisplay:o.a.string,linkPreviewDisplay:o.a.string,lockTeammateNameDisplay:o.a.bool,actions:o.a.shape({getSupportedTimezones:o.a.func.isRequired,autoUpdateTimezone:o.a.func.isRequired,savePreferences:o.a.func.isRequired}).isRequired});var ke=Object(s.connect)((function(e){const t=Object(h.getConfig)(e),a=Object(h.getSupportedTimezones)(e),s=Object(i.getCurrentUserId)(e),n=Object(g.getUserTimezone)(e,s),o=n&&n.useAutomaticTimezone&&!n.automaticTimezone,r=!n||o,l="true"===t.AllowCustomThemes,c="true"===t.EnableLinkPreviews,d=t.DefaultClientLocale,u="true"===t.EnableThemeSelection,m="true"===t.ExperimentalTimezone,E="true"===Object(h.getLicense)(e).LockTeammateNameDisplay&&"true"===t.LockTeammateNameDisplay,y=t.TeammateNameDisplay;return{lockTeammateNameDisplay:E,allowCustomThemes:l,configTeammateNameDisplay:y,enableLinkPreviews:c,defaultClientLocale:d,enableThemeSelection:u,enableTimezone:m,timezones:a,userTimezone:n,shouldAutoUpdateTimezone:r,currentUserTimezone:Object(f.getUserCurrentTimezone)(n),militaryTime:Object(p.get)(e,b.A.CATEGORY_DISPLAY_SETTINGS,b.A.USE_MILITARY_TIME,b.A.USE_MILITARY_TIME_DEFAULT),teammateNameDisplay:Object(p.get)(e,b.A.CATEGORY_DISPLAY_SETTINGS,b.A.NAME_NAME_FORMAT,y),channelDisplayMode:Object(p.get)(e,b.A.CATEGORY_DISPLAY_SETTINGS,b.A.CHANNEL_DISPLAY_MODE,b.A.CHANNEL_DISPLAY_MODE_DEFAULT),messageDisplay:Object(p.get)(e,b.A.CATEGORY_DISPLAY_SETTINGS,b.A.MESSAGE_DISPLAY,b.A.MESSAGE_DISPLAY_DEFAULT),collapseDisplay:Object(p.get)(e,b.A.CATEGORY_DISPLAY_SETTINGS,b.A.COLLAPSE_DISPLAY,b.A.COLLAPSE_DISPLAY_DEFAULT),linkPreviewDisplay:Object(p.get)(e,b.A.CATEGORY_DISPLAY_SETTINGS,b.A.LINK_PREVIEW_DISPLAY,b.A.LINK_PREVIEW_DISPLAY_DEFAULT)}}),(function(e){return{actions:Object(c.bindActionCreators)({getSupportedTimezones:u.getSupportedTimezones,autoUpdateTimezone:m.autoUpdateTimezone,savePreferences:d.savePreferences},e)}}))(_e);function Ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class we extends l.a.Component{constructor(...e){super(...e),Ae(this,"handleMinUpdateSection",e=>{this.props.updateSection(e),this.props.cancel()}),Ae(this,"handleMaxUpdateSection",e=>{this.props.updateSection(e)}),Ae(this,"handleOnChange",e=>{const t=e.currentTarget.getAttribute("data-key"),a=e.currentTarget.getAttribute("data-value");this.props.setParentState(t,a)}),Ae(this,"buildMaximizedSetting",()=>{const e=[],t=[!1,!1,!1];let a;if(this.props.activity===b.u.MENTION?t[1]=!0:this.props.activity===b.u.NONE?t[2]=!0:t[0]=!0,this.props.activity!==b.u.NONE){const e=[!1,!1];"false"===this.props.sound?e[1]=!0:e[0]=!0,a=y.J()?l.a.createElement("fieldset",null,l.a.createElement("legend",{className:"form-legend"},l.a.createElement(E.a,{id:"user.settings.notifications.desktop.sound",defaultMessage:"Notification sound"})),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"soundOn",type:"radio",name:"notificationSounds",checked:e[0],"data-key":"desktopSound","data-value":"true",onChange:this.handleOnChange}),l.a.createElement(E.a,{id:"user.settings.notifications.on",defaultMessage:"On"})),l.a.createElement("br",null)),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"soundOff",type:"radio",name:"notificationSounds",checked:e[1],"data-key":"desktopSound","data-value":"false",onChange:this.handleOnChange}),l.a.createElement(E.a,{id:"user.settings.notifications.off",defaultMessage:"Off"})),l.a.createElement("br",null)),l.a.createElement("div",{className:"margin-top x3"},l.a.createElement(E.a,{id:"user.settings.notifications.sounds_info",defaultMessage:"Notification sounds are available on IE11, Safari, Chrome and Mattermost Desktop Apps."}))):l.a.createElement("fieldset",null,l.a.createElement("legend",{className:"form-legend"},l.a.createElement(E.a,{id:"user.settings.notifications.desktop.sound",defaultMessage:"Notification sound"})),l.a.createElement("br",null),l.a.createElement(E.a,{id:"user.settings.notifications.soundConfig",defaultMessage:"Please configure notification sounds in your browser settings"}))}return e.push(l.a.createElement("div",{key:"userNotificationLevelOption"},l.a.createElement("fieldset",null,l.a.createElement("legend",{className:"form-legend"},l.a.createElement(E.a,{id:"user.settings.notifications.desktop",defaultMessage:"Send desktop notifications"})),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"desktopNotificationAllActivity",type:"radio",name:"desktopNotificationLevel",checked:t[0],"data-key":"desktopActivity","data-value":b.u.ALL,onChange:this.handleOnChange}),l.a.createElement(E.a,{id:"user.settings.notifications.allActivity",defaultMessage:"For all activity"})),l.a.createElement("br",null)),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"desktopNotificationMentions",type:"radio",name:"desktopNotificationLevel",checked:t[1],"data-key":"desktopActivity","data-value":b.u.MENTION,onChange:this.handleOnChange}),l.a.createElement(E.a,{id:"user.settings.notifications.onlyMentions",defaultMessage:"Only for mentions and direct messages"})),l.a.createElement("br",null)),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"desktopNotificationNever",type:"radio",name:"desktopNotificationLevel",checked:t[2],"data-key":"desktopActivity","data-value":b.u.NONE,onChange:this.handleOnChange}),l.a.createElement(E.a,{id:"user.settings.notifications.never",defaultMessage:"Never"}))),l.a.createElement("div",{className:"margin-top x3"},l.a.createElement(E.a,{id:"user.settings.notifications.info",defaultMessage:"Desktop notifications are available on Edge, Firefox, Safari, Chrome and Mattermost Desktop Apps."}))),l.a.createElement("hr",null),a)),l.a.createElement(C.a,{title:y.fb("user.settings.notifications.desktop.title","Desktop notifications"),inputs:e,submit:this.props.submit,saving:this.props.saving,server_error:this.props.error,updateSection:this.handleMaxUpdateSection})}),Ae(this,"buildMinimizedSetting",()=>{let e;const t=y.J();return e=this.props.activity===b.u.MENTION?t&&"false"!==this.props.sound?{id:Object(T.b)("user.settings.notifications.desktop.mentionsSound"),defaultMessage:"For mentions and direct messages, with sound"}:t&&"false"===this.props.sound?{id:Object(T.b)("user.settings.notifications.desktop.mentionsNoSound"),defaultMessage:"For mentions and direct messages, without sound"}:{id:Object(T.b)("user.settings.notifications.desktop.mentionsSoundHidden"),defaultMessage:"For mentions and direct messages"}:this.props.activity===b.u.NONE?{id:Object(T.b)("user.settings.notifications.off"),defaultMessage:"Off"}:t&&"false"!==this.props.sound?{id:Object(T.b)("user.settings.notifications.desktop.allSound"),defaultMessage:"For all activity, with sound"}:t&&"false"===this.props.sound?{id:Object(T.b)("user.settings.notifications.desktop.allNoSound"),defaultMessage:"For all activity, without sound"}:{id:Object(T.b)("user.settings.notifications.desktop.allSoundHidden"),defaultMessage:"For all activity"},l.a.createElement(O.a,{title:y.fb("user.settings.notifications.desktop.title","Desktop notifications"),describe:l.a.createElement(E.a,e),focused:this.props.focused,section:"desktop",updateSection:this.handleMinUpdateSection})})}render(){return this.props.active?this.buildMaximizedSetting():this.buildMinimizedSetting()}}we.propTypes={activity:o.a.string.isRequired,sound:o.a.string.isRequired,updateSection:o.a.func,setParentState:o.a.func,submit:o.a.func,cancel:o.a.func,error:o.a.string,active:o.a.bool,saving:o.a.bool,focused:o.a.bool};var De=a(1418);function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class je extends l.a.PureComponent{constructor(...e){super(...e),Pe(this,"handleAutoResponderChecked",e=>{this.props.setParentState("autoResponderActive",e.target.checked)}),Pe(this,"onMessageChanged",e=>{this.props.setParentState("autoResponderMessage",e.target.value)})}render(){const{autoResponderActive:e,autoResponderMessage:t}=this.props;let a;this.props.error&&(a=l.a.createElement("label",{className:"has-error"},this.props.error));const s=[],i=l.a.createElement("div",{id:"autoResponderCheckbox",key:"autoResponderCheckbox",className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:"autoResponderActive",type:"checkbox",checked:e,onChange:this.handleAutoResponderChecked}),l.a.createElement(E.a,{id:"user.settings.notifications.autoResponderEnabled",defaultMessage:"Enabled"}))),n=l.a.createElement("div",{id:"autoResponderMessage",key:"autoResponderMessage"},l.a.createElement("div",{className:"padding-top"},l.a.createElement(De.a,{style:{resize:"none"},id:"autoResponderMessageInput",className:"form-control",rows:"5",placeholder:Object(y.fb)("user.settings.notifications.autoResponderPlaceholder","Message"),value:t,maxLength:200,onChange:this.onMessageChanged}),a));return s.push(i),e&&s.push(n),s.push(l.a.createElement("div",{key:"autoResponderHint",className:"margin-top x3"},l.a.createElement(ie.a,{id:"user.settings.notifications.autoResponderHint",defaultMessage:"Set a custom message that will be automatically sent in response to Direct Messages. Mentions in Public and Private Channels will not trigger the automated reply. Enabling Automatic Replies sets your status to Out of Office and disables email and push notifications."}))),l.a.createElement(C.a,{title:l.a.createElement(E.a,{id:"user.settings.notifications.autoResponder",defaultMessage:"Automatic Direct Message Replies"}),width:"medium",shiftEnter:!0,submit:this.props.submit,saving:this.props.saving,inputs:s,updateSection:this.props.updateSection})}}function Re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xe(e){const t=e.user;let a=b.u.MENTION,s="true",i="never",n="true",o=b.u.MENTION,r=b.P.UserStatuses.AWAY,l=!1,c=y.fb("user.settings.notifications.autoResponderDefault","Hello, I am out of office and unable to respond to messages.");t.notify_props&&(t.notify_props.desktop&&(a=t.notify_props.desktop),t.notify_props.desktop_sound&&(s=t.notify_props.desktop_sound),t.notify_props.comments&&(i=t.notify_props.comments),t.notify_props.email&&(n=t.notify_props.email),t.notify_props.push&&(o=t.notify_props.push),t.notify_props.push_status&&(r=t.notify_props.push_status),t.notify_props.auto_responder_active&&(l="true"===t.notify_props.auto_responder_active),t.notify_props.auto_responder_message&&(c=t.notify_props.auto_responder_message));let d=!1,u="",m=!1,h=!1;if(t.notify_props){if(t.notify_props.mention_keys){const e=t.notify_props.mention_keys.split(",");-1===e.indexOf(t.username)?d=!1:(d=!0,e.splice(e.indexOf(t.username),1),-1!==e.indexOf("@".concat(t.username))&&e.splice(e.indexOf("@".concat(t.username)),1)),u=e.join(",")}t.notify_props.first_name&&(m="true"===t.notify_props.first_name),t.notify_props.channel&&(h="true"===t.notify_props.channel)}return{desktopActivity:a,enableEmail:n,pushActivity:o,pushStatus:r,desktopSound:s,usernameKey:d,customKeys:u,customKeysChecked:u.length>0,firstNameKey:m,channelKey:h,autoResponderActive:l,autoResponderMessage:c,notifyCommentsLevel:i,isSaving:!1}}Pe(je,"propTypes",{autoResponderActive:o.a.bool.isRequired,autoResponderMessage:o.a.string.isRequired,updateSection:o.a.func.isRequired,setParentState:o.a.func.isRequired,submit:o.a.func.isRequired,saving:o.a.bool.isRequired,error:o.a.string});class Le extends l.a.PureComponent{constructor(e){super(e),Re(this,"handleSubmit",()=>{const e={};e.email=this.state.enableEmail,e.desktop_sound=this.state.desktopSound,e.desktop=this.state.desktopActivity,e.push=this.state.pushActivity,e.push_status=this.state.pushStatus,e.comments=this.state.notifyCommentsLevel,e.auto_responder_active=this.state.autoResponderActive.toString(),e.auto_responder_message=this.state.autoResponderMessage,e.auto_responder_message&&""!==e.auto_responder_message||(e.auto_responder_message=y.fb("user.settings.notifications.autoResponderDefault","Hello, I am out of office and unable to respond to messages."));const t=[];this.state.usernameKey&&t.push(this.props.user.username);let a=t.join(",");this.state.customKeys.length>0&&this.state.customKeysChecked&&(a+=","+this.state.customKeys),e.mention_keys=a,e.first_name=this.state.firstNameKey.toString(),e.channel=this.state.channelKey.toString(),this.setState({isSaving:!0}),this.props.actions.updateMe({notify_props:e}).then(({data:e,error:t})=>{e?(this.handleUpdateSection(""),this.setState(xe(this.props))):t&&this.setState({serverError:t.message,isSaving:!1})})}),Re(this,"handleCancel",e=>{e&&e.preventDefault(),this.setState(xe(this.props))}),Re(this,"handleUpdateSection",e=>{e?this.props.updateSection(e):this.props.updateSection(""),this.setState({isSaving:!1}),this.handleCancel()}),Re(this,"setStateValue",(e,t)=>{const a={};a[e]=t,this.setState(a)}),Re(this,"handleEmailRadio",e=>{this.setState({enableEmail:e})}),Re(this,"updateUsernameKey",e=>{this.setState({usernameKey:e})}),Re(this,"updateFirstNameKey",e=>{this.setState({firstNameKey:e})}),Re(this,"updateChannelKey",e=>{this.setState({channelKey:e})}),Re(this,"updateCustomMentionKeys",()=>{if(this.refs.customcheck.checked){const e=this.refs.custommentions.value;this.setState({customKeys:e.replace(/ /g,""),customKeysChecked:!0})}else this.setState({customKeys:"",customKeysChecked:!1})}),Re(this,"onCustomChange",()=>{this.refs.customcheck.checked=!0,this.updateCustomMentionKeys()}),Re(this,"createPushNotificationSection",()=>{if("push"===this.props.activeSection){const e=[];let t=null,a=null;if(this.props.sendPushNotifications){const s=[!1,!1,!1];this.state.pushActivity===b.u.ALL?s[0]=!0:this.state.pushActivity===b.u.NONE?s[2]=!0:s[1]=!0;const i=[!1,!1,!1];let n;this.state.pushStatus===b.P.UserStatuses.ONLINE?i[0]=!0:this.state.pushStatus===b.P.UserStatuses.AWAY?i[1]=!0:i[2]=!0,this.state.pushActivity!==b.u.NONE&&(n=l.a.createElement("fieldset",null,l.a.createElement("legend",{className:"form-legend"},l.a.createElement(E.a,{id:"user.settings.notifications.push_notification.status",defaultMessage:"Trigger push notifications when"})),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"pushNotificationOnline",type:"radio",name:"pushNotificationStatus",checked:i[0],onChange:this.handlePushStatusRadio.bind(this,b.P.UserStatuses.ONLINE)}),l.a.createElement(E.a,{id:"user.settings.push_notification.online",defaultMessage:"Online, away or offline"}))),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"pushNotificationAway",type:"radio",name:"pushNotificationStatus",checked:i[1],onChange:this.handlePushStatusRadio.bind(this,b.P.UserStatuses.AWAY)}),l.a.createElement(E.a,{id:"user.settings.push_notification.away",defaultMessage:"Away or offline"}))),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"pushNotificationOffline",type:"radio",name:"pushNotificationStatus",checked:i[2],onChange:this.handlePushStatusRadio.bind(this,b.P.UserStatuses.OFFLINE)}),l.a.createElement(E.a,{id:"user.settings.push_notification.offline",defaultMessage:"Offline"})))),t=l.a.createElement("span",null,l.a.createElement(E.a,{id:"user.settings.push_notification.status_info",defaultMessage:"Notification alerts are only pushed to your mobile device when your online status matches the selection above."}))),e.push(l.a.createElement("div",null,l.a.createElement("fieldset",{key:"userNotificationLevelOption"},l.a.createElement("legend",{className:"form-legend"},l.a.createElement(E.a,{id:"user.settings.push_notification.send",defaultMessage:"Send mobile push notifications"})),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"pushNotificationAllActivity",type:"radio",name:"pushNotificationLevel",checked:s[0],onChange:this.handlePushRadio.bind(this,b.u.ALL)}),l.a.createElement(E.a,{id:"user.settings.push_notification.allActivity",defaultMessage:"For all activity"}))),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"pushNotificationMentions",type:"radio",name:"pushNotificationLevel",checked:s[1],onChange:this.handlePushRadio.bind(this,b.u.MENTION)}),l.a.createElement(E.a,{id:"user.settings.push_notification.onlyMentions",defaultMessage:"For mentions and direct messages"}))),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"pushNotificationNever",type:"radio",name:"pushNotificationLevel",checked:s[2],onChange:this.handlePushRadio.bind(this,b.u.NONE)}),l.a.createElement(E.a,{id:"user.settings.notifications.never",defaultMessage:"Never"}))),l.a.createElement("div",{className:"margin-top x3"},l.a.createElement(E.a,{id:"user.settings.push_notification.info",defaultMessage:"Notification alerts are pushed to your mobile device when there is activity in Mattermost."}))),l.a.createElement("hr",null),n)),a=this.handleSubmit}else e.push(l.a.createElement("div",{key:"oauthEmailInfo",className:"padding-top"},l.a.createElement(E.a,{id:"user.settings.push_notification.disabled_long",defaultMessage:"Push notifications have not been enabled by your System Administrator."})));return l.a.createElement(C.a,{title:y.fb("user.settings.notifications.push","Mobile push notifications"),extraInfo:t,inputs:e,submit:a,server_error:this.state.serverError,updateSection:this.handleUpdateSection})}let e="";return e=this.state.pushActivity===b.u.ALL?this.state.pushStatus===b.P.UserStatuses.AWAY?l.a.createElement(E.a,{id:"user.settings.push_notification.allActivityAway",defaultMessage:"For all activity when away or offline"}):this.state.pushStatus===b.P.UserStatuses.OFFLINE?l.a.createElement(E.a,{id:"user.settings.push_notification.allActivityOffline",defaultMessage:"For all activity when offline"}):l.a.createElement(E.a,{id:"user.settings.push_notification.allActivityOnline",defaultMessage:"For all activity when online, away or offline"}):this.state.pushActivity===b.u.NONE?l.a.createElement(E.a,{id:"user.settings.notifications.never",defaultMessage:"Never"}):this.props.sendPushNotifications?this.state.pushStatus===b.P.UserStatuses.AWAY?l.a.createElement(E.a,{id:"user.settings.push_notification.onlyMentionsAway",defaultMessage:"For mentions and direct messages when away or offline"}):this.state.pushStatus===b.P.UserStatuses.OFFLINE?l.a.createElement(E.a,{id:"user.settings.push_notification.onlyMentionsOffline",defaultMessage:"For mentions and direct messages when offline"}):l.a.createElement(E.a,{id:"user.settings.push_notification.onlyMentionsOnline",defaultMessage:"For mentions and direct messages when online, away or offline"}):l.a.createElement(E.a,{id:"user.settings.push_notification.disabled",defaultMessage:"Push notifications are not enabled"}),l.a.createElement(O.a,{title:y.fb("user.settings.notifications.push","Mobile push notifications"),describe:e,section:"push",updateSection:this.handleUpdateSection})}),this.state=xe(e)}handleNotifyCommentsRadio(e){this.setState({notifyCommentsLevel:e})}handlePushRadio(e){this.setState({pushActivity:e})}handlePushStatusRadio(e){this.setState({pushStatus:e})}render(){const e=this.state.serverError,t=this.props.user;let a,s,i;if("keys"===this.props.activeSection){const s=[];if(t.first_name){const e=e=>{this.updateFirstNameKey(e.target.checked)};s.push(l.a.createElement("div",{key:"userNotificationFirstNameOption"},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:"notificationTriggerFirst",type:"checkbox",checked:this.state.firstNameKey,onChange:e}),l.a.createElement(E.a,{id:"user.settings.notifications.sensitiveName",defaultMessage:'Your case sensitive first name "{first_name}"',values:{first_name:t.first_name}})))))}const i=e=>{this.updateUsernameKey(e.target.checked)};s.push(l.a.createElement("div",{key:"userNotificationUsernameOption"},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:"notificationTriggerUsername",type:"checkbox",checked:this.state.usernameKey,onChange:i}),l.a.createElement(E.a,{id:"user.settings.notifications.sensitiveUsername",defaultMessage:'Your non-case sensitive username "{username}"',values:{username:t.username}})))));const n=e=>{this.updateChannelKey(e.target.checked)};s.push(l.a.createElement("div",{key:"userNotificationChannelOption"},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:"notificationTriggerShouts",type:"checkbox",checked:this.state.channelKey,onChange:n}),l.a.createElement(E.a,{id:"user.settings.notifications.channelWide",defaultMessage:'Channel-wide mentions "@channel", "@all", "@here"'}))))),s.push(l.a.createElement("div",{key:"userNotificationCustomOption"},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:"notificationTriggerCustom",ref:"customcheck",type:"checkbox",checked:this.state.customKeysChecked,onChange:this.updateCustomMentionKeys}),l.a.createElement(E.a,{id:"user.settings.notifications.sensitiveWords",defaultMessage:"Other non-case sensitive words, separated by commas:"}))),l.a.createElement("input",{id:"notificationTriggerCustomText",autoFocus:this.state.customKeysChecked,ref:"custommentions",className:"form-control mentions-input",type:"text",defaultValue:this.state.customKeys,onChange:this.onCustomChange,onFocus:y.hb,"aria-labelledby":"notificationTriggerCustom"})));const o=l.a.createElement("span",null,l.a.createElement(E.a,{id:"user.settings.notifications.mentionsInfo",defaultMessage:"Mentions trigger when someone sends a message that includes your username (@{username}) or any of the options selected above.",values:{username:t.username}}));a=l.a.createElement(C.a,{title:y.fb("user.settings.notifications.wordsTrigger","Words that trigger mentions"),inputs:s,submit:this.handleSubmit,saving:this.state.isSaving,server_error:e,updateSection:this.handleUpdateSection,extraInfo:o})}else{let e=["@"+t.username];this.state.firstNameKey&&e.push(t.first_name),this.state.usernameKey&&e.push(t.username),this.state.channelKey&&(e.push("@channel"),e.push("@all"),e.push("@here")),this.state.customKeys.length>0&&(e=e.concat(this.state.customKeys.split(",")));let s="";for(let t=0;t<e.length;t++)""!==e[t]&&(s+='"'+e[t]+'", ');s=s.length>0?s.substring(0,s.length-2):l.a.createElement(E.a,{id:"user.settings.notifications.noWords",defaultMessage:"No words configured"}),a=l.a.createElement(O.a,{title:y.fb("user.settings.notifications.wordsTrigger","Words that trigger mentions"),describe:s,section:"keys",updateSection:this.handleUpdateSection})}if("comments"===this.props.activeSection){const t=[!1,!1,!1];"never"===this.state.notifyCommentsLevel?t[2]=!0:"root"===this.state.notifyCommentsLevel?t[1]=!0:t[0]=!0;const a=[];a.push(l.a.createElement("fieldset",{key:"userNotificationLevelOption"},l.a.createElement("legend",{className:"form-legend hidden-label"},y.fb("user.settings.notifications.comments","Reply notifications")),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"notificationCommentsAny",type:"radio",name:"commentsNotificationLevel",checked:t[0],onChange:this.handleNotifyCommentsRadio.bind(this,"any")}),l.a.createElement(E.a,{id:"user.settings.notifications.commentsAny",defaultMessage:"Trigger notifications on messages in reply threads that I start or participate in"})),l.a.createElement("br",null)),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"notificationCommentsRoot",type:"radio",name:"commentsNotificationLevel",checked:t[1],onChange:this.handleNotifyCommentsRadio.bind(this,"root")}),l.a.createElement(E.a,{id:"user.settings.notifications.commentsRoot",defaultMessage:"Trigger notifications on messages in threads that I start"})),l.a.createElement("br",null)),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"notificationCommentsNever",type:"radio",name:"commentsNotificationLevel",checked:t[2],onChange:this.handleNotifyCommentsRadio.bind(this,"never")}),l.a.createElement(E.a,{id:"user.settings.notifications.commentsNever",defaultMessage:"Do not trigger notifications on messages in reply threads unless I'm mentioned"})))));const i=l.a.createElement("span",null,l.a.createElement(E.a,{id:"user.settings.notifications.commentsInfo",defaultMessage:"In addition to notifications for when you're mentioned, select if you would like to receive notifications on reply threads."}));s=l.a.createElement(C.a,{title:y.fb("user.settings.notifications.comments","Reply notifications"),extraInfo:i,inputs:a,submit:this.handleSubmit,saving:this.state.isSaving,server_error:e,updateSection:this.handleUpdateSection})}else{let e="";e="never"===this.state.notifyCommentsLevel?l.a.createElement(E.a,{id:"user.settings.notifications.commentsNever",defaultMessage:"Do not trigger notifications on messages in reply threads unless I'm mentioned"}):"root"===this.state.notifyCommentsLevel?l.a.createElement(E.a,{id:"user.settings.notifications.commentsRoot",defaultMessage:"Trigger notifications on messages in threads that I start"}):l.a.createElement(E.a,{id:"user.settings.notifications.commentsAny",defaultMessage:"Trigger notifications on messages in reply threads that I start or participate in"}),s=l.a.createElement(O.a,{title:y.fb("user.settings.notifications.comments","Reply notifications"),describe:e,section:"comments",updateSection:this.handleUpdateSection})}if(this.props.enableAutoResponder)if("auto-responder"===this.props.activeSection)i=l.a.createElement("div",null,l.a.createElement(je,{autoResponderActive:this.state.autoResponderActive,autoResponderMessage:this.state.autoResponderMessage,updateSection:this.handleUpdateSection,setParentState:this.setStateValue,submit:this.handleSubmit,error:this.state.serverError,saving:this.state.isSaving}),l.a.createElement("div",{className:"divider-dark"}));else{const e=this.state.autoResponderActive?l.a.createElement(E.a,{id:"user.settings.notifications.autoResponderEnabled",defaultMessage:"Enabled"}):l.a.createElement(E.a,{id:"user.settings.notifications.autoResponderDisabled",defaultMessage:"Disabled"});i=l.a.createElement(O.a,{title:l.a.createElement(E.a,{id:"user.settings.notifications.autoResponder",defaultMessage:"Automatic Direct Message Replies"}),width:"medium",describe:e,section:"auto-responder",updateSection:this.handleUpdateSection})}const n=this.createPushNotificationSection();return l.a.createElement("div",{id:"notificationSettings"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal",onClick:this.props.closeModal},l.a.createElement("span",{"aria-hidden":"true"},"×")),l.a.createElement("h4",{className:"modal-title",ref:"title"},l.a.createElement("div",{className:"modal-back"},l.a.createElement(E.a,{id:"generic_icons.collapse",defaultMessage:"Collapse Icon"},e=>l.a.createElement("i",{className:"fa fa-angle-left",title:e,onClick:this.props.collapseModal}))),l.a.createElement(E.a,{id:"user.settings.notifications.title",defaultMessage:"Notification Settings"}))),l.a.createElement("div",{ref:"wrapper",className:"user-settings"},l.a.createElement("h3",{id:"notificationSettingsTitle",className:"tab-header"},l.a.createElement(E.a,{id:"user.settings.notifications.header",defaultMessage:"Notifications"})),l.a.createElement("div",{className:"divider-dark first"}),l.a.createElement(we,{activity:this.state.desktopActivity,sound:this.state.desktopSound,updateSection:this.handleUpdateSection,setParentState:this.setStateValue,submit:this.handleSubmit,saving:this.state.isSaving,cancel:this.handleCancel,error:this.state.serverError,active:"desktop"===this.props.activeSection}),l.a.createElement("div",{className:"divider-light"}),n,l.a.createElement("div",{className:"divider-light"}),a,l.a.createElement("div",{className:"divider-light"}),s,l.a.createElement("div",{className:"divider-light"}),i,l.a.createElement("div",{className:"divider-dark"})))}}Re(Le,"propTypes",{user:o.a.object,updateSection:o.a.func,activeSection:o.a.string,closeModal:o.a.func.isRequired,collapseModal:o.a.func.isRequired,sendPushNotifications:o.a.bool,enableAutoResponder:o.a.bool,actions:o.a.shape({updateMe:o.a.func.isRequired}).isRequired}),Re(Le,"defaultProps",{user:null,activeSection:"",activeTab:""});var Ie=Object(s.connect)((function(e){const t=Object(h.getConfig)(e);return{sendPushNotifications:"true"===t.SendPushNotifications,enableAutoResponder:"true"===t.ExperimentalEnableAutomaticReplies}}),(function(e){return{actions:Object(c.bindActionCreators)({updateMe:se.updateMe},e)}}))(Le),ze=a(11),Ue=a(325);function qe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Be extends l.a.Component{constructor(e){super(e),qe(this,"getStateFromProps",()=>{const{closeUnusedDirectMessages:e,channelSwitcherOption:t,sidebarPreference:{grouping:a,sorting:s},unreadsAtTop:i,favoriteAtTop:n}=this.props;return{settings:{close_unused_direct_messages:e,channel_switcher_section:t,grouping:a,unreadsAtTop:i,favoriteAtTop:n,sorting:s},isSaving:!1}}),qe(this,"trackSettingChangeIfNecessary",e=>{this.state.settings[e]!==this.props.sidebarPreference[e]&&Object(Ue.d)("settings","user_settings_update",{field:"sidebar."+e,value:this.state.settings[e]})}),qe(this,"updateSetting",(e,t)=>{const a=this.state.settings;a[e]=t,this.setState(a)}),qe(this,"handleSubmit",e=>{const{actions:t,user:a}=this.props,s=[];if("channel_grouping"===e||"channel_sorting"===e){const e={grouping:this.state.settings.grouping,unreads_at_top:this.state.settings.unreadsAtTop,favorite_at_top:this.state.settings.favoriteAtTop,sorting:this.state.settings.sorting};s.push({user_id:a.id,category:b.P.Preferences.CATEGORY_SIDEBAR_SETTINGS,name:"",value:JSON.stringify(e)}),this.trackSettingChangeIfNecessary("grouping"),this.trackSettingChangeIfNecessary("sorting"),this.trackSettingChangeIfNecessary("unreadsAtTop"),this.trackSettingChangeIfNecessary("favoriteAtTop")}else s.push({user_id:a.id,category:b.P.Preferences.CATEGORY_SIDEBAR_SETTINGS,name:e,value:this.state.settings[e]}),Object(Ue.d)("settings","user_settings_update",{field:"sidebar."+e,value:this.state.settings[e]});this.setState({isSaving:!0}),t.savePreferences(a.id,s).then(()=>{this.updateSection("")})}),qe(this,"getPreviousSection",e=>{const{showChannelOrganization:t}=this.props;switch(e){case"autoCloseDM":return"channelSwitcher";case"groupChannels":return"dummySectionName";case"channelSwitcher":return t?"groupChannels":"dummySectionName";default:return null}}),qe(this,"updateSection",e=>{this.setState(this.getStateFromProps()),this.setState({isSaving:!1}),this.props.updateSection(e)}),qe(this,"renderAutoCloseDMLabel",e=>"after_seven_days"===e?l.a.createElement(E.a,{id:"user.settings.sidebar.after_seven_days",defaultMessage:"After 7 days with no new messages"}):l.a.createElement(E.a,{id:"user.settings.sidebar.never",defaultMessage:"Never"})),qe(this,"renderAutoCloseDMSection",()=>{let e;return e="autoCloseDM"===this.props.activeSection?l.a.createElement(C.a,{title:l.a.createElement(E.a,{id:"user.settings.sidebar.autoCloseDMTitle",defaultMessage:"Automatically Close Direct Messages"}),inputs:[l.a.createElement("fieldset",{key:"autoCloseDMSetting"},l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"autoCloseDMAfterSevenDays",type:"radio",name:"autoCloseDM",checked:"after_seven_days"===this.state.settings.close_unused_direct_messages,onChange:this.updateSetting.bind(this,"close_unused_direct_messages","after_seven_days")}),l.a.createElement(E.a,{id:"user.settings.sidebar.after_seven_days",defaultMessage:"After 7 days with no new messages"}))),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"autoCloseDMNever",type:"radio",name:"autoCloseDM",checked:"never"===this.state.settings.close_unused_direct_messages,onChange:this.updateSetting.bind(this,"close_unused_direct_messages","never")}),l.a.createElement(E.a,{id:"user.settings.sidebar.never",defaultMessage:"Never"}))),l.a.createElement("div",{className:"margin-top x3"},l.a.createElement(E.a,{id:"user.settings.sidebar.autoCloseDMDesc",defaultMessage:"Direct Message conversations can be reopened with the “+” button in the sidebar or using the Channel Switcher (CTRL+K)."})))],setting:"close_unused_direct_messages",submit:this.handleSubmit,saving:this.state.isSaving,server_error:this.state.serverError,updateSection:this.updateSection}):l.a.createElement(O.a,{title:l.a.createElement(E.a,{id:"user.settings.sidebar.autoCloseDMTitle",defaultMessage:"Automatically Close Direct Messages"}),describe:this.renderAutoCloseDMLabel(this.state.settings.close_unused_direct_messages),section:"autoCloseDM",updateSection:this.updateSection}),l.a.createElement(l.a.Fragment,null,e,l.a.createElement("div",{className:"divider-dark"}))}),qe(this,"renderOrganizationLabel",()=>{const{sidebarPreference:{sorting:e,grouping:t},unreadsAtTop:a,favoriteAtTop:s}=this.props,i=[];let n,o;"by_type"===t?i.push(l.a.createElement(E.a,{key:"by_type",id:"user.settings.sidebar.groupByTypeShort",defaultMessage:"Group by channel type"})):i.push(l.a.createElement(E.a,{key:"none",id:"user.settings.sidebar.groupByNoneShort",defaultMessage:"No grouping"})),"alpha"===e?(n=Object(T.b)("user.settings.sidebar.sortAlphaShort"),o="sorted alphabetically"):(n=Object(T.b)("user.settings.sidebar.sortRecentShort"),o="sorted by recency"),i.push(l.a.createElement("span",{key:"comma"},", ")),i.push(l.a.createElement(E.a,{key:"sorting",id:n,defaultMessage:o}));let r=null,c=null;return"true"===a&&"false"===s?(r=Object(T.b)("user.settings.sidebar.unreadsShort"),c="Unreads grouped separately"):"false"===a&&"true"===s?(r=Object(T.b)("user.settings.sidebar.favoritesShort"),c="Favorites grouped separately"):"true"===a&&"true"===s&&(r=Object(T.b)("user.settings.sidebar.unreadsFavoritesShort"),c="Unreads and favorites grouped separately"),r&&(i.push(l.a.createElement("br",{key:"break"})),i.push(l.a.createElement(E.a,{key:"atTop",id:r,defaultMessage:c}))),i}),qe(this,"renderChannelSwitcherLabel",e=>"true"===e?l.a.createElement(E.a,{id:"user.settings.sidebar.on",defaultMessage:"On"}):l.a.createElement(E.a,{id:"user.settings.sidebar.off",defaultMessage:"Off"})),qe(this,"renderChannelOrganizationSection",()=>{const{grouping:e,sorting:t}=this.state.settings;let a;if("groupChannels"===this.props.activeSection){const s=[];s.push(l.a.createElement("fieldset",{key:"groupingSectionSetting"},l.a.createElement("legend",{className:"form-legend"},l.a.createElement(E.a,{id:"user.settings.sidebar.groupChannelsTitle",defaultMessage:"Channel grouping"})),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"byTypeOption",type:"radio",name:"groupChannels",checked:"by_type"===e,onChange:this.updateSetting.bind(this,"grouping","by_type")}),l.a.createElement(E.a,{id:"user.settings.sidebar.groupByType",defaultMessage:"Channels grouped by type"}))),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"noneOption",type:"radio",name:"groupChannels",checked:"none"===e,onChange:this.updateSetting.bind(this,"grouping","none")}),l.a.createElement(E.a,{id:"user.settings.sidebar.groupByNone",defaultMessage:"Combine all channel types"}))),l.a.createElement("div",{className:"margin-top x3"},l.a.createElement(E.a,{id:"user.settings.sidebar.groupDesc",defaultMessage:"Group channels by type, or combine all types into a list."})))),s.push(l.a.createElement("hr",{key:"sortingDivider"})),s.push(l.a.createElement("fieldset",{key:"sortingOptions"},l.a.createElement("legend",{className:"form-legend"},l.a.createElement(E.a,{id:"user.settings.sidebar.sortChannelsTitle",defaultMessage:"Channel sorting"})),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"recentSectionEnabled",type:"radio",name:"sortChannels",checked:"recent"===t,onChange:this.updateSetting.bind(this,"sorting","recent")}),l.a.createElement(E.a,{id:"user.settings.sidebar.sortRecent",defaultMessage:"Recency"}))),l.a.createElement("div",{className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"alphaSectionEnabled",type:"radio",name:"sortChannels",checked:"alpha"===t,onChange:this.updateSetting.bind(this,"sorting","alpha")}),l.a.createElement(E.a,{id:"user.settings.sidebar.sortAlpha",defaultMessage:"Alphabetically"}))),l.a.createElement("div",{className:"margin-top x3"},l.a.createElement(E.a,{id:"user.settings.sidebar.sortDesc",defaultMessage:"Sort channels alphabetically, or by most recent post."})))),s.push(l.a.createElement("hr",{key:"divider"})),s.push(l.a.createElement("fieldset",{key:"unreadOption"},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:"unreadAtTopOption",type:"checkbox",checked:"true"===this.state.settings.unreadsAtTop,onChange:e=>this.updateSetting("unreadsAtTop",e.target.checked.toString())}),l.a.createElement(E.a,{id:"user.settings.sidebar.unreads",defaultMessage:"Unreads grouped separately"}))),l.a.createElement("div",{className:"margin-top x3"},l.a.createElement(E.a,{id:"user.settings.sidebar.unreadsDesc",defaultMessage:"Group unread channels separately until read."})))),s.push(l.a.createElement("hr",{key:"groupingDivider"})),s.push(l.a.createElement("fieldset",{key:"favoriteOption"},l.a.createElement("div",{className:"checkbox"},l.a.createElement("label",null,l.a.createElement("input",{id:"favoriteAtTopOption",type:"checkbox",checked:"true"===this.state.settings.favoriteAtTop,onChange:e=>this.updateSetting("favoriteAtTop",e.target.checked.toString())}),l.a.createElement(E.a,{id:"user.settings.sidebar.favorites",defaultMessage:"Favorites grouped separately"}))),l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(E.a,{id:"user.settings.sidebar.favoritesDesc",defaultMessage:"Channels marked as favorites will be grouped separately."})))),a=l.a.createElement(C.a,{title:l.a.createElement(E.a,{id:"user.settings.sidebar.groupAndSortChannelsTitle",defaultMessage:"Channel grouping and sorting"}),inputs:s,setting:"channel_grouping",submit:this.handleSubmit,saving:this.state.isSaving,server_error:this.state.serverError,updateSection:this.updateSection})}else a=l.a.createElement(O.a,{title:l.a.createElement(E.a,{id:"user.settings.sidebar.groupAndSortChannelsTitle",defaultMessage:"Channel grouping and sorting"}),describe:this.renderOrganizationLabel(),section:"groupChannels",updateSection:this.updateSection});return l.a.createElement(l.a.Fragment,null,a,l.a.createElement("div",{className:"divider-light"}))}),qe(this,"renderChannelSwitcherSection",()=>{let e=Object(T.b)("user.settings.sidebar.channelSwitcherSectionDesc.windows"),t="The channel switcher is shown at the bottom of the sidebar and is used to jump between channels quickly. It can also be accessed using CTRL + K.";Object(y.W)()&&(e=Object(T.b)("user.settings.sidebar.channelSwitcherSectionDesc.mac"),t="The channel switcher is shown at the bottom of the sidebar and is used to jump between channels quickly. It can also be accessed using CMD + K.");const a=l.a.createElement(E.a,{id:e,defaultMessage:t});return"channelSwitcher"===this.props.activeSection?l.a.createElement(C.a,{title:l.a.createElement(E.a,{id:"user.settings.sidebar.channelSwitcherSectionTitle",defaultMessage:"Channel Switcher"}),inputs:[l.a.createElement("fieldset",{key:"channelSwitcherSectionSetting"},l.a.createElement("legend",{className:"form-legend hidden-label"},l.a.createElement(E.a,{id:"user.settings.sidebar.channelSwitcherSectionTitle",defaultMessage:"Channel Switcher"})),l.a.createElement("div",{id:"channelSwitcherRadioOn",className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"channelSwitcherSectionEnabled",type:"radio",name:"channelSwitcher",checked:"true"===this.state.settings.channel_switcher_section,onChange:this.updateSetting.bind(this,"channel_switcher_section","true")}),l.a.createElement(E.a,{id:"user.settings.sidebar.on",defaultMessage:"On"})),l.a.createElement("br",null)),l.a.createElement("div",{id:"channelSwitcherRadioOff",className:"radio"},l.a.createElement("label",null,l.a.createElement("input",{id:"channelSwitcherSectionOff",type:"radio",name:"channelSwitcher",checked:"false"===this.state.settings.channel_switcher_section,onChange:this.updateSetting.bind(this,"channel_switcher_section","false")}),l.a.createElement(E.a,{id:"user.settings.sidebar.off",defaultMessage:"Off"})),l.a.createElement("br",null)),l.a.createElement("div",{id:"channelSwitcherHelpText"},l.a.createElement("br",null),a))],setting:"channel_switcher_section",submit:this.handleSubmit,saving:this.state.isSaving,server_error:this.state.serverError,updateSection:this.updateSection}):l.a.createElement(O.a,{title:l.a.createElement(E.a,{id:"user.settings.sidebar.channelSwitcherSectionTitle",defaultMessage:"Channel Switcher"}),describe:this.renderChannelSwitcherLabel(this.props.channelSwitcherOption),section:"channelSwitcher",updateSection:this.updateSection})}),this.state=this.getStateFromProps()}render(){const{showUnusedOption:e,showChannelOrganization:t}=this.props,a=t?this.renderChannelOrganizationSection():null,s=e?this.renderAutoCloseDMSection():null,i=this.renderChannelSwitcherSection();return l.a.createElement("div",null,l.a.createElement("div",{className:"modal-header"},l.a.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},l.a.createElement("span",{"aria-hidden":"true"},"×")),l.a.createElement("h4",{className:"modal-title",ref:"title"},l.a.createElement("div",{className:"modal-back",onClick:this.props.collapseModal},l.a.createElement(j.a,{className:"fa fa-angle-left",title:{id:Object(T.b)("generic_icons.collapse"),defaultMessage:"Collapse Icon"}})),l.a.createElement(E.a,{id:"user.settings.sidebar.title",defaultMessage:"Sidebar Settings"}))),l.a.createElement("div",{id:"sidebarTitle",className:"user-settings"},l.a.createElement("h3",{className:"tab-header"},l.a.createElement(E.a,{id:"user.settings.sidebar.title",defaultMessage:"Sidebar Settings"})),l.a.createElement("div",{className:"divider-dark first"}),a,i,e?l.a.createElement("div",{className:"divider-light"}):l.a.createElement("div",{className:"divider-dark"}),s))}}qe(Be,"propTypes",{actions:o.a.shape({savePreferences:o.a.func.isRequired}).isRequired,user:o.a.object,closeUnusedDirectMessages:o.a.string.isRequired,showUnusedOption:o.a.bool.isRequired,showChannelOrganization:o.a.bool.isRequired,channelSwitcherOption:o.a.string.isRequired,sidebarPreference:o.a.shape({grouping:o.a.string.isRequired,sorting:o.a.string.isRequired}).isRequired,unreadsAtTop:o.a.string.isRequired,favoriteAtTop:o.a.string.isRequired,updateSection:o.a.func,activeSection:o.a.string,closeModal:o.a.func.isRequired,collapseModal:o.a.func.isRequired});var Fe,Ye,Ke,Ge=Object(s.connect)((function(e){const t=Object(h.getConfig)(e),a=Object(p.get)(e,ze.Preferences.CATEGORY_SIDEBAR_SETTINGS,"close_unused_direct_messages","after_seven_days"),s=Object(p.get)(e,ze.Preferences.CATEGORY_SIDEBAR_SETTINGS,"channel_switcher_section","true"),n=Object(p.getSidebarPreferences)(e);return{closeUnusedDirectMessages:a,sidebarPreference:n,unreadsAtTop:n.unreads_at_top,favoriteAtTop:n.favorite_at_top,channelSwitcherOption:s,showChannelOrganization:"true"===t.ExperimentalChannelOrganization,showUnusedOption:"true"===t.CloseUnusedDirectMessages,user:Object(i.getCurrentUser)(e)}}),(function(e){return{actions:Object(c.bindActionCreators)({savePreferences:d.savePreferences},e)}}))(Be);class He extends l.a.PureComponent{render(){return"notifications"===this.props.activeTab?l.a.createElement("div",null,l.a.createElement(Ie,{user:this.props.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):"display"===this.props.activeTab?l.a.createElement("div",null,l.a.createElement(ke,{user:this.props.user,activeSection:this.props.activeSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal,setEnforceFocus:this.props.setEnforceFocus,setRequireConfirm:this.props.setRequireConfirm})):"sidebar"===this.props.activeTab?l.a.createElement("div",null,l.a.createElement(Ge,{activeSection:this.props.activeSection,updateSection:this.props.updateSection,closeModal:this.props.closeModal,collapseModal:this.props.collapseModal})):l.a.createElement("div",null)}}Fe=He,Ye="propTypes",Ke={user:o.a.object.isRequired,activeTab:o.a.string,activeSection:o.a.string,updateSection:o.a.func,closeModal:o.a.func.isRequired,collapseModal:o.a.func.isRequired,setEnforceFocus:o.a.func.isRequired,setRequireConfirm:o.a.func.isRequired},Ye in Fe?Object.defineProperty(Fe,Ye,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):Fe[Ye]=Ke;t.default=Object(s.connect)((function(e){return{user:Object(i.getCurrentUser)(e)}}))(He)}}]);
//# sourceMappingURL=29.d81ea6dd74d703c38e5b.js.map